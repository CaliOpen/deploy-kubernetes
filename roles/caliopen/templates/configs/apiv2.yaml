ApiConfig:
  host: 0.0.0.0
  port: 31415
  BackendConfig:
    backend_name: cassandra
    backend_settings:
      hosts:
{% for host in groups['store'] %}
      - {{ hostvars[host]['private_ips'][0] }}
{% endfor %}
      keyspace: caliopen
      consistency_level: 1
      raw_size_limit: 1048576                                # max size in bytes for objects in db. Use S3 interface if larger.
      object_store: s3
      object_store_settings:
        endpoint: {{ hostvars['object-store1']['private_ips'][0] }}:9000
        access_key: {{ object_store_access_key }}
        secret_key: {{ object_store_secret_key }}
        location: eu-fr-paris
        buckets:
          raw_messages: caliopen-raw-messages                # bucket name to put raw messages to
          temporary_attachments: caliopen-tmp-attachments    # bucket name to store draft attachments
      use_vault: true
      vault_settings:
        url: https://vault.{{ caliopen_domain_name }}:8200
        username: {{ vault_api_username }}
        password: {{ vault_api_password }}
  IndexConfig:
    index_name: elasticsearch
    index_settings:
      hosts:
{% for host in groups['store'] %}
      - http://{{ hostvars[host]['private_ips'][0] }}:9200
{% endfor %}
  NatsConfig:
    url: nats://{{ hostvars['mq1']['private_ips'][0] }}:4222
    outSMTP_topic: outboundSMTP     # topic's name to post "send" draft order
    contacts_topic: contactAction   # topic's name to post messages regarding contacts' events
  swaggerSpec: /etc/caliopen/swagger.json #absolute path or relative path to go.server bin
  RedisConfig:
    host: {{ hostvars['cache1']['private_ips'][0] }}:6379
    password: ""      #no password set
    db: 0             #use default db
  NotifierConfig:
    base_url: https://{{ caliopen_domain_name }}
    admin_username: admin
    templates_path: "/etc/caliopen/notifiers/templates/"
ProxyConfig:
  host: 0.0.0.0
  port: 31415
  routes:
  - /api/v2/: 127.0.0.1:6544
  - /: apiv1:6543         # route "/" catch all other requests
